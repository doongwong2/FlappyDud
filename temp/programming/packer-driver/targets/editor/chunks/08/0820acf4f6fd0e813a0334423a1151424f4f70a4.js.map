{"version":3,"sources":["file:///C:/Users/User/Desktop/programs/FlappyDud/assets/Scripts/Pipes.ts"],"names":["_decorator","Component","Node","Vec3","screen","find","UITransform","ccclass","property","random","min","max","Math","Pipes","type","tooltip","tempStartLocationUp","tempStartLocationDown","scene","windowSize","game","pipeSpeed","tempSpeed","isPass","onLoad","getComponent","initPos","x","topPipe","width","bottomPipe","gap","topHeight","y","setPosition","update","deltaTime","position","passPipe","createPipe","destroy"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node , Vec3, screen, find, UITransform} from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\nconst random = (min,max) => {\r\n    return Math.random() * (max - min) + min; \r\n}\r\n\r\n@ccclass('Pipes')\r\nexport class Pipes extends Component {\r\n\r\n    @property({\r\n        type: Node,\r\n        tooltip:'top pipe'\r\n    })\r\n    public topPipe: Node;\r\n\r\n    @property({\r\n        type: Node,\r\n        tooltip:'bottom pipe'\r\n    })\r\n    public bottomPipe: Node;\r\n\r\n    public tempStartLocationUp: Vec3 = new Vec3(0, 0, 0);\r\n    public tempStartLocationDown: Vec3 = new Vec3(0,0,0);\r\n    public scene = screen.windowSize;\r\n\r\n    public game;            //speed of pipe from gameCtrl.\r\n    public pipeSpeed: number//final speed of pipes.\r\n    public tempSpeed: number//temporary speed.\r\n\r\n    isPass: boolean;\r\n\r\n    onLoad(){\r\n        this.game = find(\"GameCtrl\").getComponent(\"GameCtrl\");\r\n        this.pipeSpeed = this.game.pipeSpeed;\r\n        this.initPos();\r\n        this.isPass = false;\r\n    }\r\n\r\n    initPos(){\r\n\r\n        this.tempStartLocationUp.x = (this.topPipe.getComponent(UITransform).width + this.scene.width);\r\n        this.tempStartLocationDown.x = (this.bottomPipe.getComponent(UITransform).width + this.scene.width);\r\n\r\n        let gap = random(90,100);\r\n        let topHeight = random(0,450);\r\n        \r\n        this.tempStartLocationUp.y = topHeight;\r\n        this.tempStartLocationDown.y = (topHeight - (gap* 10));\r\n\r\n        this.bottomPipe.setPosition(this.tempStartLocationDown);\r\n        this.topPipe.setPosition(this.tempStartLocationUp);\r\n\r\n    }\r\n\r\n    update(deltaTime){\r\n        this.tempSpeed = this.pipeSpeed * deltaTime;\r\n\r\n        this.tempStartLocationDown = this.bottomPipe.position;\r\n        this.tempStartLocationUp = this.topPipe.position;\r\n\r\n        this.tempStartLocationDown.x -= this.tempSpeed;\r\n        this.tempStartLocationUp.x -= this.tempSpeed;\r\n\r\n        this.bottomPipe.setPosition(this.tempStartLocationDown);\r\n        this.topPipe.setPosition(this.tempStartLocationUp);\r\n\r\n        if(this.isPass ==false && this.topPipe.position.x <= 0){\r\n            this.isPass = true;\r\n            this.game.passPipe();\r\n\r\n            \r\n        }\r\n\r\n        if(this.topPipe.position.x <(0 - this.scene.width)){\r\n            this.game.createPipe();\r\n            this.destroy();\r\n        }\r\n\r\n\r\n    }\r\n}\r\n\r\n\r\n"]}